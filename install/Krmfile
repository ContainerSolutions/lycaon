apiVersion: config.k8s.io/v1alpha1
kind: Krmfile
openAPI:
  definitions:
    io.k8s.cli.setters.fqdn:
      description: full qualified domain name
      x-k8s-cli:
        setter:
          name: fqdn
          value: "myregistry.mydomain.io"
    io.k8s.cli.setters.username:
      description: registry user name
      x-k8s-cli:
        setter:
          name: username
          value: "myuser"
    io.k8s.cli.substitutions.fqdn-secret:
      x-k8s-cli:
        substitution:
          name: fqdn-secret
          pattern: docker-server=${fqdn}
          values:
          - marker: ${fqdn}
            ref: '#/definitions/io.k8s.cli.setters.fqdn'
    io.k8s.cli.substitutions.username-secret:
      x-k8s-cli:
        substitution:
          name: username-secret
          pattern: docker-username=${username}
          values:
          - marker: ${username}
            ref: '#/definitions/io.k8s.cli.setters.username'
